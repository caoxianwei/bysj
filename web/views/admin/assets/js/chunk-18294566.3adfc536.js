(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-18294566"],{"0894":function(t,e,a){"use strict";var i=a("0f75"),r=a.n(i);r.a},"0f75":function(t,e,a){},"7f7f":function(t,e,a){var i=a("86cc").f,r=Function.prototype,l=/^\s*function ([^ (]*)/,s="name";s in r||a("9e1e")&&i(r,s,{configurable:!0,get:function(){try{return(""+this).match(l)[1]}catch(t){return""}}})},a21f:function(t,e,a){var i=a("584a"),r=i.JSON||(i.JSON={stringify:JSON.stringify});t.exports=function(t){return r.stringify.apply(r,arguments)}},ddc3:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"table"},[a("div",{staticClass:"crumbs"},[a("el-breadcrumb",{attrs:{separator:"/"}},[a("el-breadcrumb-item",[a("i",{staticClass:"el-icon-lx-cascades"}),t._v(" 基础表格")])],1)],1),a("div",{staticClass:"container"},[a("div",{staticClass:"handle-box"},[a("el-input",{staticClass:"handle-input mr10",attrs:{placeholder:"筛选关键词"},model:{value:t.select_word,callback:function(e){t.select_word=e},expression:"select_word"}}),a("el-button",{attrs:{type:"primary",icon:"search"},on:{click:t.search}},[t._v("搜索")])],1),a("el-table",{ref:"multipleTable",staticClass:"table",attrs:{data:t.tableData,border:""},on:{"selection-change":t.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"55",align:"center"}}),a("el-table-column",{attrs:{prop:"ID",label:"ID",sortable:"",width:"150"}}),a("el-table-column",{attrs:{prop:"CreatedAt",label:"日期",sortable:"",width:"150",formatter:t.formatCreatedAt}}),a("el-table-column",{attrs:{prop:"Avatar",label:"头像",sortable:"",width:"150"},scopedSlots:t._u([{key:"default",fn:function(t){return[a("img",{staticClass:"image",staticStyle:{width:"80px",height:"80px"},attrs:{src:t.row.Avatar}})]}}])}),a("el-table-column",{attrs:{prop:"Gender",label:"性别",sortable:"",width:"75",formatter:t.formatGender}}),a("el-table-column",{attrs:{prop:"Mobile",label:"手机号码",sortable:"",width:"180"}}),a("el-table-column",{attrs:{prop:"NickName",label:"昵称",sortable:"",width:"150"}}),a("el-table-column",{attrs:{prop:"Username",label:"真实姓名",sortable:"",width:"150"}}),a("el-table-column",{attrs:{prop:"CardNumber",label:"身份证号码",sortable:"",width:"180"}}),a("el-table-column",{attrs:{prop:"IsBind",label:"是否绑定",sortable:"",width:"80",formatter:t.formatBind}}),a("el-table-column",{attrs:{label:"操作",width:"180",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"text",icon:"el-icon-edit"},on:{click:function(a){t.handleEdit(e.$index,e.row)}}},[t._v("编辑\n                    ")])]}}])})],1),a("div",{staticClass:"pagination"},[a("el-pagination",{attrs:{background:"",layout:"prev, pager, next",total:t.total},on:{"current-change":t.handleCurrentChange}})],1)],1),a("el-dialog",{attrs:{title:"编辑",visible:t.editVisible,width:"30%"},on:{"update:visible":function(e){t.editVisible=e}}},[a("el-form",{ref:"form",attrs:{model:t.form,"label-width":"85px"}},[a("el-form-item",{attrs:{label:"姓名"}},[a("el-input",{model:{value:t.form.Username,callback:function(e){t.$set(t.form,"Username",e)},expression:"form.Username"}})],1),a("el-form-item",{attrs:{label:"身份证号码"}},[a("el-input",{model:{value:t.form.CardNumber,callback:function(e){t.$set(t.form,"CardNumber",e)},expression:"form.CardNumber"}})],1),a("el-form-item",{attrs:{label:"手机号码"}},[a("el-input",{model:{value:t.form.Mobile,callback:function(e){t.$set(t.form,"Mobile",e)},expression:"form.Mobile"}})],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.editVisible=!1}}},[t._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:t.saveEdit}},[t._v("确 定")])],1)],1)],1)},r=[],l=a("f499"),s=a.n(l),n=(a("7f7f"),a("4020")),o={name:"basetable",data:function(){return{url:"",tableData:[],cur_page:1,multipleSelection:[],select_cate:"",select_word:"",del_list:[],is_search:!1,editVisible:!1,delVisible:!1,form:{Username:"",CardNumber:"",Mobile:""},idx:-1,total:0}},created:function(){this.getData()},computed:{data:function(){var t=this;return this.tableData.filter(function(e){for(var a=!1,i=0;i<t.del_list.length;i++)if(e.name===t.del_list[i].name){a=!0;break}if(!a&&e.address.indexOf(t.select_cate)>-1&&(e.name.indexOf(t.select_word)>-1||e.address.indexOf(t.select_word)>-1))return e})}},methods:{formatCreatedAt:function(t,e,a){var i=new Date(Date.parse(a)),r=i.getFullYear()+"-",l=(i.getMonth()+1<10?"0"+(i.getMonth()+1):i.getMonth()+1)+"-",s=i.getDate()+" ",n=i.getHours()+":",o=i.getMinutes()+":",c=i.getSeconds();return r+l+s+n+o+c},formatGender:function(t,e,a){return 1===a?"男":2===a?"女":"未知"},formatBind:function(t,e,a){return 1===a?"已绑定":2===a?"未绑定":void 0},handleCurrentChange:function(t){this.cur_page=t,this.getData()},getData:function(){var t=this;n["a"].get("/api/admin/user/list",{params:{page:this.cur_page,search:this.select_word}}).then(function(e){t.total=e.total,t.tableData=e.data})},search:function(){this.getData(),this.is_search=!0},formatter:function(t,e){return t.address},filterTag:function(t,e){return e.tag===t},handleEdit:function(t,e){this.idx=t;var a=this.tableData[t];this.form={Username:a.Username,CardNumber:a.CardNumber,Mobile:a.Mobile},this.editVisible=!0},handleDelete:function(t,e){this.idx=t,this.delVisible=!0},delAll:function(){var t=this.multipleSelection.length,e="";this.del_list=this.del_list.concat(this.multipleSelection);for(var a=0;a<t;a++)e+=this.multipleSelection[a].name+" ";this.$message.error("删除了"+e),this.multipleSelection=[]},handleSelectionChange:function(t){this.multipleSelection=t},saveEdit:function(){var t=this,e=this.tableData[this.idx];if(e.CardNumber=this.form.CardNumber,e.Mobile=this.form.Mobile,e.Username=this.form.Username,this.RegCardNumber(e.CardNumber))if(this.RegMobile(e.Mobile)){""!==this.form.CardNumber&&""!==this.form.Mobile&&(e.IsBind=1);var a=s()({ID:this.tableData[this.idx].ID,CardNumber:this.form.CardNumber,IsBind:this.form.IsBind,Mobile:this.form.Mobile,Username:this.form.Username});n["a"].post("/api/admin/user/update",a).then(function(a){1e4===a.code?t.$set(t.tableData,t.idx,e):10014===a.code&&t.$router.push("/login")}),this.editVisible=!1,this.$message.success("修改第 ".concat(this.idx+1," 行成功"))}else this.$message.error("请输入正确的手机号码");else this.$message.error("请输入正确的身份证号码")},deleteRow:function(){this.tableData.splice(this.idx,1),this.$message.success("删除成功"),console.log(this.tableData[this.idx]),n["a"].post("/api/admin/user/delete",this.tableData[this.idx].ID).then(function(t){console.log(t)}),this.delVisible=!1},RegCardNumber:function(t){var e=/^[1-9]\d{7}((0\d)|(1[0-2]))(([0|1|2]\d)|3[0-1])\d{3}$/,a=/^[1-9]\d{5}(18|19|20)\d{2}((0[1-9])|(1[0-2]))(([0-2][1-9])|10|20|30|31)\d{3}[0-9Xx]$/;return!!e.test(t)||!!a.test(t)},RegMobile:function(t){var e=/^1[3|4|5|7|8]\d{9}/;return!!e.test(t)}}},c=o,d=(a("0894"),a("2877")),u=Object(d["a"])(c,i,r,!1,null,"aa38ebb2",null);u.options.__file="User.vue";e["default"]=u.exports},f499:function(t,e,a){t.exports=a("a21f")}}]);
//# sourceMappingURL=chunk-18294566.3adfc536.js.map